<html>

<head>
    <meta charset="UTF-8">
    <title>点点租</title>
    <link rel="stylesheet" href="layUI/css/layui.css">
    <link rel="stylesheet" type="text/css" href="css/all.css"/>
    <link rel="stylesheet" type="text/css" href="css/index.css"/>
    <link rel="stylesheet" type="text/css" href="css/swiper.min.css"/>
    <script src="layUI/layui.js" type="text/javascript" charset="UTF-8"></script>
    <script src="js/utils.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/jquery-1.12.0.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/swiper.jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript">
        /**
         * 区域
         * @param conditionList
         */
        function setConditionScreen(conditionList) {
            let conditionBox = document.getElementById("screen_condition_box");
            if (!conditionBox) {
                return;
            }
            for (let i = 0, len = conditionList.length; i < len && i < 10; i++) {
                if (conditionList[i].id === 1) {
                    continue;
                }
                let conditionItem = document.createElement("div");
                conditionBox.appendChild(conditionItem);
                let conditionText = document.createElement("a");
                conditionText.setAttribute("href", "search.html?district_id=" + conditionList[i].id);
                conditionText.innerHTML = conditionList[i].name;
                conditionItem.appendChild(conditionText);
            }
            let conditionItem = document.createElement("div");
            conditionBox.appendChild(conditionItem);
            let conditionText = document.createElement("a");
            conditionText.setAttribute("href", "search.html");
            conditionText.innerHTML = "更多>>";
            conditionItem.appendChild(conditionText);
        }

        /**
         * 类型
         * @param typeList
         */
        function setTypeScreen(typeList) {
            let typeBox = document.getElementById("screen_type_box");
            if (!typeBox) {
                return;
            }
            for (let i = 0, len = typeList.length; i < len; i++) {
                if (typeList[i].id === 1) {
                    continue;
                }
                let typeItem = document.createElement("a");
                typeItem.setAttribute("href", "search.html?type_id=" + typeList[i].id);
                typeBox.appendChild(typeItem);
                let typeImg = document.createElement("img");
                typeImg.setAttribute("class", "screen_type_icon");
                switch (typeList[i].id) {
                    case 2:
                        typeImg.setAttribute("src", "img/icon_type_1.png");
                        break;
                    case 3:
                        typeImg.setAttribute("src", "img/icon_type_2.png");
                        break;
                    case 4:
                        typeImg.setAttribute("src", "img/icon_type_3.png");
                        break;
                }
                typeItem.appendChild(typeImg);
                let typeText = document.createElement("div");
                typeText.setAttribute("class", "screen_type_text");
                typeText.innerHTML = typeList[i].name;
                typeItem.appendChild(typeText);
            }
        }

        /**
         * 面积
         * @param areaRangeList
         */
        function setAreaRangeScreen(areaRangeList) {
            let areaRangeBox = document.getElementById("screen_area_box");
            if (!areaRangeBox) {
                return;
            }
            for (let i = 0, len = areaRangeList.length; i < len && i < 10; i++) {
                if (areaRangeList[i].id === 1) {
                    continue;
                }
                let areaRangeText = document.createElement("a");
                areaRangeText.setAttribute("class", "screen_option");
                areaRangeText.setAttribute("href", "search.html?area_range_id=" + areaRangeList[i].id);
                areaRangeBox.appendChild(areaRangeText);
            }
        }

        /**
         * 价格
         * @param priceRangeList
         */
        function setPriceRangeScreen(priceRangeList) {
            let priceRangeBox = document.getElementById("screen_price_box");
            if (!priceRangeBox) {
                return;
            }
            for (let i = 0, len = priceRangeList.length; i < len && i < 10; i++) {
                if (priceRangeList[i].id === 1) {
                    continue;
                }
                let priceRangeText = document.createElement("a");
                priceRangeText.setAttribute("class", "screen_option");
                priceRangeText.setAttribute("href", "search.html?price_range_id=" + priceRangeList[i].id);
                priceRangeBox.appendChild(priceRangeText);
            }
        }

        /**
         * 设置核心圈
         * @param coreList 长度不超过4个
         */
        function setCoreBuilding(coreList) {
            if (coreList && coreList.length > 0) {
                document.getElementById("core_building").setAttribute("style", "display: flex;")
            } else {
                return;
            }

            for (let i = 0, len = coreList.length; i < len && i < 5; i++) {
                let img_list = coreList[i].img_list;
                let coreItemImg = document.getElementById("core_item_img_" + i);
                if (img_list && img_list.length > 0) {
                    coreItemImg.setAttribute("src", img_list[0]);
                }

                let coreItemText = document.getElementById("core_item_text_" + i);
                coreItemText.innerHTML = coreList[i].name;
            }
        }

        /**
         * 设置精选写字楼
         * @param buildingList 长度为4的倍数
         */
        function setFineBuildingList(buildingList) {
            if (!buildingList) {
                return;
            }
            let fineBuildingListBox = document.getElementById("fine_building");
            for (let i = 0, len = buildingList.length; i < len; i++) {
                let buildingItemBox = document.createElement("div");
                buildingItemBox.setAttribute("class", "fine_building_item_box image_big flex_column clickable");
                if (i % 3 === 2) {
                    buildingItemBox.setAttribute("style", "margin-right: 155px; margin-left: 155px;");
                }
                buildingItemBox.onclick = function () {
                    window.open("buildingDetail.html?building_id=" + buildingList[i].id, "_blank");
                };
                fineBuildingListBox.appendChild(buildingItemBox);

                let buildingImageBox = document.createElement("div");
                buildingImageBox.setAttribute("class", "fine_building_image_box");
                buildingItemBox.appendChild(buildingImageBox);
                let buildingImage = document.createElement("img");
                buildingImage.setAttribute("src", buildingList[i].img_list[0]);
                buildingImageBox.appendChild(buildingImage);

                let buildingTitle = document.createElement("a");
                buildingTitle.setAttribute("class", "fine_building_title");
                buildingTitle.innerHTML = buildingList[i].name;
                buildingItemBox.appendChild(buildingTitle);

                let buildingInfoBox = document.createElement("div");
                buildingInfoBox.setAttribute("class", "fine_building_info");
                buildingItemBox.appendChild(buildingInfoBox);

                let buildingAddressBox = document.createElement("div");
                buildingAddressBox.setAttribute("class", "flex_row");
                // buildingInfoBox.appendChild(buildingAddressBox);
                let buildingAddressIcon = document.createElement("div");
                buildingAddressIcon.setAttribute("class", "icon_address");
                buildingAddressBox.appendChild(buildingAddressIcon);
                let buildingAddressText = document.createElement("span");
                buildingAddressText.setAttribute("class", "address_text");
                buildingAddressText.innerHTML = buildingList[i].district_name + "-" + buildingList[i].zone_name;
                buildingAddressBox.appendChild(buildingAddressText);

                let buildingPriceBox = document.createElement("div");
                buildingPriceBox.setAttribute("class", "fine_building_price");
                // buildingInfoBox.appendChild(buildingPriceBox);
                let buildingPriceText = document.createElement("span");
                buildingPriceText.setAttribute("class", "price_number");
                buildingPriceText.innerHTML = buildingList[i].price_average;
                buildingPriceBox.appendChild(buildingPriceText);
                buildingPriceBox.append("元/m²/天");
            }
        }

        /**
         * 设置头部背景图
         */
        function setTopBackground(imageUrl) {
            let topBgBox = document.getElementById("top_bg_item_box");
            for (let i = 0, len = imageUrl.length; i < len; i++) {
                let itemBox = document.createElement("div");
                itemBox.setAttribute("class", "swiper-slide");
                topBgBox.appendChild(itemBox);
                let imgView = document.createElement("img");
                imgView.setAttribute("src", imageUrl[i]);
                itemBox.appendChild(imgView);
            }
        }

        /**
         * 设置资讯
         */
        function setLeftNewsList(newsList) {
            if (!newsList) {
                return;
            }

            let newsListBox = document.getElementById("news_list_left");
            for (let i = 0, len = newsList.length; i < len; i++) {
                let newsItem = document.createElement("li");
                let newsTitle = document.createElement("a");
                newsTitle.innerHTML = newsList[i].title;
                newsTitle.setAttribute("href", "newsDetail.html?newsId=" + newsList[i].id);
                newsItem.appendChild(newsTitle);
                let newsTime = document.createElement("div");
                newsTime.innerHTML = newsList[i].last_edit_time;
                newsItem.appendChild(newsTime);
                newsListBox.appendChild(newsItem);
            }
        }

        window.onload = function () {
            getFilterList();
            getNewsList();
        };

        function getFilterList() {
            http.post({
                url: "index/all",
                success: function (data) {
                    filter = data;
                    setTopBackground(data.bannerList);
                    setConditionScreen(data.districtList);
                    setTypeScreen(data.typeList);
                    setAreaRangeScreen(data.areaRangeList);
                    setPriceRangeScreen(data.priceRangeList);
                    setCoreBuilding(data.coreList);
                    setFineBuildingList(data.fineList);

                    openSwiper(data.bannerList.length !== 1);
                }
            });
        }

        function getNewsList() {
            http.post({
                url: "news/hot",
                success: function (data) {
                    filter = data;
                    setLeftNewsList(filter);
                }
            });
        }

        function openSwiper(loop) {
            // 启动轮播图
            new Swiper('#top_bg', {
                loop: loop,
                autoplay: 2000,
                pagination: '#top_bg_position',
                paginationClickable: true,
                autoplayDisableOnInteraction: false,
            });
        }
    </script>
</head>

<body>
<div class="top_bg_search">
    <div class="top_bg_box swiper-container" id="top_bg">
        <div class="swiper-wrapper" id="top_bg_item_box">
        </div>
        <div class="swiper_position swiper_top" id="top_bg_position"></div>
    </div>
    <div class="index_top_box">
        <div class="title_box">
            <div class="win flex_row position_relative">
                <img src="img/nav_logo_white.png" class="top_logo" alt="">
                <div class="clickable">
                    上海
                </div>
                <div class="position_right">
                    <div class="title_text_right">
                        <a href="" class="clickable">首页</a>
                    </div>
                    <div class="title_text_right title_obvious">
                        <a href="" class="clickable">写字楼出租</a>
                    </div>
                    <div class="title_text_right">
                        <a href="" class="clickable">共享办公</a>
                    </div>
                    <div class="title_text_right">
                        <a href="" class="clickable">资讯中心</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="win win_center">
            <div class="top_screen_box">
                <div class="screen_type_box">
                    <div class="screen_item">
                        <div class="screen_title">
                            区域
                        </div>
                        <div class="screen_item_box" id="screen_condition_box">

                        </div>
                    </div>
                    <div class="screen_item">
                        <div class="screen_title">
                            面积<span class="screen_subtitle">（单位：m²）</span>
                        </div>
                        <div class="screen_option_box flex_column">
                            <div class="flex_row option_select_box" id="screen_area_box">
                            </div>
                            <div class="flex_row option_text">
                                <div class="screen_option_text">0</div>
                                <div class="screen_option_text">100</div>
                                <div class="screen_option_text">300</div>
                                <div class="screen_option_text">500</div>
                                <div class="screen_option_text">1000</div>
                                <div class="screen_option_text">∞</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="new_search_btn_box">
                    <a href="search.html">马上找房</a>
                </div>
                <div class="top_search_box">
                    <form action="search.html">
                        <input type="text" class="top_search" name="keyword" placeholder="楼盘名称或区域商圈名称"/>
                        <input class="search_btn" type="submit" value="搜索"/>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="win">
    <h3 class="item_title">核心商圈享&nbsp;<span class="item_subtitle">优质配套 与大咖公司为邻</span></h3>
    <div class="image_box_in_title flex_row" id="core_building" style="display: none;">
        <div class="core_left_big_box image_big">
            <img class="core_img" src="img/test.jpg" id="core_item_img_0"/>
            <div class="core_text" id="core_item_text_0">地铁周边出行最便捷</div>
        </div>
        <div class="core_min_box">
            <div class="core_right_box image_big">
                <img class="core_img" src="img/test.jpg" id="core_item_img_1"/>
                <div class="core_text" id="core_item_text_1">地铁周边出行最便捷</div>
            </div>
            <div class="core_right_box image_big">
                <img class="core_img" src="img/test.jpg" id="core_item_img_2"/>
                <div class="core_text" id="core_item_text_2">地铁周边出行最便捷</div>
            </div>
            <div class="core_right_box image_big matop">
                <img class="core_img" src="img/test.jpg" id="core_item_img_3"/>
                <div class="core_text" id="core_item_text_3">地铁周边出行最便捷</div>
            </div>
            <div class="core_right_box image_big matop">
                <img class="core_img" src="img/test.jpg" id="core_item_img_4"/>
                <div class="core_text" id="core_item_text_4">地铁周边出行最便捷</div>
            </div>
        </div>
    </div>
    <h3 class="item_title">精选写字楼&nbsp;<span class="item_subtitle">高性价 高格调 超精致</span></h3>
    <div class="fine_building flex_row" id="fine_building">
    </div>
</div>

<div class="win matop bg_white flex_row">
    <img src="img/test.jpg" class="entrust_img"/>
    <div class="entrust_info_box flex_column">
        <div class="entrust_title">委托橙办租房网，省心找办公室</div>
        <div class="entrust_subtitle">10分钟内响应，全程免租，专业看房顾问带看</div>
        <a class="entrust_btn layui-btn layui-btn-warm" href="search.html">委托找房</a>
    </div>
</div>

<div class="win matop bg_white flex_row">
    <div class="news_heat">
        <div class="news_title flex_row">
            写字楼新闻
            <a href="news.html">更多>></a>
        </div>
        <div class="news_list" id="news_list_left">
        </div>
    </div>
    <div class="news_heat"></div>
</div>

<div class="bottom_box flex_column">
    <div class="win">
        <div class="flex_row bottom_top">
            <div class="foot_l">
                <div class="ad_title">租办公室，就上橙办 ！</div>
            </div>
            <div class="foot_m">
                客服服务：（早9:00-晚21:00）<br/>
                <span>021-5090 6123</span>
            </div>
        </div>
        <div class="foot_link">
            友情链接：
            <a href="https://sh.diandianzu.com/" target="_blank">上海写字楼出租</a>
        </div>
    </div>
</div>
</body>
</html>